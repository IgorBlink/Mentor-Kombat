<!DOCTYPE html>
<html>
<head>
    <title>Simple MK Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: white;
            font-family: Arial, sans-serif;
        }
        #arena {
            border: 4px solid #fbbf24;
            width: 800px;
            height: 400px;
            background: black;
            margin: 20px auto;
        }
        .info {
            text-align: center;
            margin: 10px;
        }
        .loading {
            text-align: center;
            color: #fbbf24;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="info">
        <h1>Simple MK.js Test</h1>
        <div id="status" class="loading">Loading...</div>
    </div>
    
    <div id="arena"></div>
    
    <div class="info">
        <p>Controls: A/D move, W jump, S crouch, J/K punch/kick for Player 1</p>
        <p>Arrow keys move, 1/2 punch/kick for Player 2</p>
    </div>

    <script src="/mk.js/game/src/movement.js"></script>
    <script src="/mk.js/game/src/mk.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const statusEl = document.getElementById('status');
            const arenaEl = document.getElementById('arena');
            
            function updateStatus(message) {
                statusEl.textContent = message;
                console.log(message);
            }
            
            updateStatus('Scripts loaded, checking mk...');
            
            function waitForMk() {
                return new Promise((resolve, reject) => {
                    let attempts = 0;
                    const checkMk = () => {
                        attempts++;
                        if (typeof window.mk !== 'undefined') {
                            resolve();
                        } else if (attempts > 100) {
                            reject(new Error('mk.js not loaded after 10 seconds'));
                        } else {
                            setTimeout(checkMk, 100);
                        }
                    };
                    checkMk();
                });
            }
            
            async function startGame() {
                try {
                    updateStatus('Waiting for mk.js...');
                    await waitForMk();
                    
                    updateStatus('mk.js ready, starting game...');
                    
                    const options = {
                        arena: {
                            container: arenaEl,
                            arena: mk.arenas.types.THRONE_ROOM
                        },
                        fighters: [
                            { name: 'Subzero' },
                            { name: 'Kano' }
                        ]
                    };
                    
                    const gamePromise = mk.start(options);
                    
                    if (gamePromise && gamePromise.ready) {
                        gamePromise.ready(() => {
                            updateStatus('Game ready! Fight!');
                        });
                    }
                    
                    // Fallback
                    setTimeout(() => {
                        updateStatus('Game should be running...');
                    }, 3000);
                    
                } catch (error) {
                    updateStatus('Error: ' + error.message);
                    console.error(error);
                }
            }
            
            startGame();
        });
    </script>
</body>
</html> 